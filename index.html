<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
        <meta host="public.ian">
		<title>IAN</title>
		<script>const ian={endpointServers:["https://iamnbd2022.github.io/iandns/"],currentEndpointServer:"",currentHost:"",endpoints:[],loadHost:()=>{if(!ian.currentHost){var e=document.getElementsByTagName("meta");for(let n=0;n<e.length;n++)if(e[n].hasAttribute("host")){ian.currentHost=e[n].getAttribute("host");break}}return ian.currentHost},loadEndpointServers:()=>!(!ian.endpointServers||!ian.endpointServers.length)&&(ian.currentEndpointServer=ian.endpointServers.find(n=>ian.isWorking(n,"ping.txt")),null!=ian.currentEndpointServer),isWorking:(n,e)=>{n+=e||"/_health_";return"pong"===ian.getObject(n,!1)},loadIndex:n=>(n+="/index.js?ian-host="+ian.loadHost(),ian.loadJs(n),!0),loadJs:n=>{var e=document.createElement("script");e.src=n,document.getElementsByTagName("head")[0].appendChild(e)},selectServer:()=>{},getJson:n=>{n=ian.findServerUrl()+"/"+n;return ian.getObject(n,!0)},getObject:(n,e)=>{var t=new XMLHttpRequest;return n&&(n+="?ian-host="+ian.loadHost()),t.open("GET",n,!1),t.send(null),399<t.status?(console.error(`Failed to send request to url[${n}] with status code[${t.status} and message:`+t.responseText),null):e?JSON.parse(t.responseText):t.responseText},findServerUrl:()=>{if(!ian.currentEndpointServer&&!ian.loadEndpointServers())return console.warn("No available endpoint server"),null;var n=ian.currentEndpointServer+ian.loadHost()+".json",n=ian.getObject(n,!0),e=n.mainEndPoint;if(e&&ian.isWorking(e))return ian.endpoints.push(e),e;e=n.endpoints;if(e){ian.endpoints=ian.endpoints.concat(e);for(var t of e){t=t.endpoint;if(ian.isWorking(t))return t;console.error("Cannot connect to endpoint:",t)}}},boot:()=>{var n=ian.findServerUrl();null!=n&&(console.info("Connecting to endpoint:",n),ian.loadIndex(n))},reload:n=>{ian.currentHost=n,ian.boot()},injectImgs:n=>{var e=document.getElementsByTagName("img");if(e)for(var t of e)ian.injectImg(t)},injectImg:i=>{i&&(i.onerror=n=>{let e=i.originalSrc||i.src;if(e.startsWith(document.location.origin)&&(e=e.substring(document.location.origin.length)),i.complete&&0==i.naturalHeight&&e&&e.length&&"/"==e.substring(0,1)){for(var t of ian.endpoints)if(ian.isWorking(t.endpoint)){i.src=t.endpoint+e+"?ian-host="+ian.loadHost();break}i.originalSrc=e}})}};window&&ian&&(window.ian=ian),ian.boot();
</script>
	</head>
	<body class="" id="content">

	</body>
</html>